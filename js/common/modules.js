!function(){function t(){return function(t){switch(t){case 0:return"保存";case 1:return"通过";case 2:return"拒绝";case 3:return"待审核";case 4:return"预热中";case 5:return"赞助中";case 6:return"赞助成功";default:return"赞助失败"}}}function e(){return function(t){switch(t){case 0:return"bg-green";case 1:return"bg-green";case 2:return"bg-gray";case 3:return"bg-gray";case 4:return"bg-orange";case 5:return"bg-green";case 6:return"bg-green";default:return"bg-gray"}}}function n(){return function(t){}}angular.module("common",[]).filter("supportStatus",t).filter("supportStatusClass",e).filter("formatTime",n)}(),function(){function t(t){function e(e,n){var n=n||"alert";"alert"==n?mui.alert(e,"E场景活动"):"toast"==n&&e&&($("body").append('<div class="messageBox">'+e+"</div>").fadeIn(),t(function(){$(".messageBox").fadeOut()},3500))}var n={show:e};return n}function e(){function t(t){var e={aesKey:"1234367822345608",ivStr:"1166222233334455",newAesKey:null},n=CryptoJS.enc.Utf8.parse(t),r=CryptoJS.enc.Utf8.parse(e.aesKey),a=CryptoJS.enc.Utf8.parse(e.ivStr),i=CryptoJS.AES.encrypt(n,r,{iv:a,mode:CryptoJS.mode.CBC});return i.toString()}var e={getValue:t};return e}function n(t){function e(e,n,r){n.bind("click",function(){t.history.back()})}var n={restrict:"AE",link:e};return n}function r(t){function e(e){""==r.data?t.history.back():r.data=e}function n(){return r.data}var r={data:"",setDatas:e,getDatas:n};return r}function a(t){function e(t,e,r){var a=$(window).height();t=$(t),r=r>0?r:a/10,$("html, body").animate({scrollTop:e?t.offset().top-r:t.offset().top+t.outerHeight()+r-a},{duration:200,easing:"linear",complete:function(){n(t)||t[0].scrollIntoView(!!e)}})}function n(t){function e(t){return t>o&&t<u}t=$(t);var n=$(window),r=n.height(),a=t.offset().top,i=t.outerHeight(),o=n.scrollTop(),u=o+r;return!!e(a+(i>r?r:i)/2)||i>r&&e(a+i-r/2)}var r={toView:e,inView:n};return r}t.$inject=["$timeout"],n.$inject=["$window"],r.$inject=["$window"],a.$inject=["$window"],angular.module("common").factory("messageService",t).factory("encryptService",e).factory("transmitService",r).factory("anchorService",a).directive("backButton",n)}(),function(){function t(t,e){function n(e){var n=$(e).find("input[data-empty], textarea[data-empty]"),r=0,a=!1;return n.each(function(){var e=($(this).attr("name"),$.trim($(this).val()));if(""==e||null==e||"[]"==e)return $(this).focus(),t.show($(this).data("empty")),r++,!1}),0==r&&(a=!0),a}function r(e){var n=!0,r={phone:$(e).find("input[format-phone]"),bankCard:$(e).find("input[format-bankCard]"),newPwd:$(e).find("input[new-password]"),confirmPwd:$(e).find("input[confirm-password]"),minLength:$(e).find("input[min-length], textarea[min-length]"),maxLength:$(e).find("input[max-length], textarea[max-length]"),minNumber:$(e).find("input[min-number]"),maxNumber:$(e).find("input[max-number]"),number:$(e).find("input[format-number]"),money:$(e).find("input[fomat-money]"),email:$(e).find("input[format-email]"),idCard:$(e).find("input[format-idCard]")},a={phone:/^((145|147)|(15[^4])|(17[6-8])|((13|18)[0-9]))\d{8}$/,idCard:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,number:/^[0-9]*$/,money:/^[\d,]+(\.\d*)?$/},i=function(t){if(/[^0-9 \-]+/.test(t))return!1;var e=0,n=0,r=!1;t=t.replace(/\D/g,"");for(var a=t.length-1;a>=0;a--){var i=t.charAt(a);n=parseInt(i,10),r&&(n*=2)>9&&(n-=9),e+=n,r=!r}return e%10===0},o=function(e){var o=0,u=0;return!(r[e].length>0&&(r[e].each(function(){var s=$(this).data("empty")?$(this).data("empty").slice(3):"";val=$(this).val();var c=function(){u++,s?t.show(s+"格式不正确"):t.show("请输入正确的格式")};if("phone"!=e&&"number"!=e&&"idCard"!=e&&"email"!=e&&"money"!=e||a[e].test(val)||c(),"bankCard"==e&&(i(val)||c()),"money"==e&&0==val&&(u++,t.show(s+"必须大于0")),"confirmPwd"==e&&r.newPwd.val()!=val&&(u++,t.show("两次密码输入不一致")),"minLength"==e){var m=$(this).attr("min-length");val.length<m&&(u++,t.show($(this).data("empty").slice(3)+"最小长度为"+m))}if("maxLength"==e){var f=$(this).attr("max-length");val.length>f&&(u++,t.show($(this).data("empty").slice(3)+"最大长度为"+f))}if("minNumber"==e){var l=$(this).attr("min-number");Number(val)<Number(l)&&(u++,t.show($(this).data("empty").slice(3)+"最小值为"+l))}if("maxNumber"==e){var d=$(this).attr("max-number");Number(val)>Number(d)&&(u++,t.show($(this).data("empty").slice(3)+"最大值为"+d))}if(0!=u)return $(this).focus(),o++,n=!1,!1}),0!=o))||(n=!1,!1)};return!!(o("phone")&&o("minLength")&&o("maxLength")&&o("bankCard")&&o("number")&&o("email")&&o("idCard")&&o("confirmPwd")&&o("money")&&o("minNumber")&&o("maxNumber"))||n}function a(t){var n={};$(t).find("input[name],textarea[name],select[name]").each(function(){var t=$(this).attr("name"),e=$.trim($(this).val());if(t.indexOf(".")!=-1){var r=t.split(".");n[r[0]]||(n[r[0]]={}),n[r[0]][r[1]]=e}else if(t.indexOf("[]")!=-1){var r=t.split("[]");n[r[0]]=JSON.parse(e)}else n[t]=e});var r=function(e,n){var r=$(t).find("input["+e+"]");r.length>0&&r.each(function(){n($(this).attr("name"),$(this).val())})};return r("encrypt",function(t,r){n[t]=e.getValue(r)}),r("timestamp",function(t,e){n[t]=new Date(e).getTime()}),n}var i={isEmpty:n,isCorrectFormat:r,submitData:a};return i}function e(t,e,n,r,a){function i(i,o,u){i.text=u.text||"提交保存",i.btnClass=u.btnClass||"",o.bind("click",function(){if(!n.isEmpty(u.form)||!n.isCorrectFormat(u.form))return!1;var o=n.submitData(u.form);if(!jQuery.isEmptyObject(o)){var s=u.method||"POST";t.getDatas(s,u.action,o).then(function(t){return u.callback?(i.callback({arg1:t}),!1):void(0==t.code?("back"==u.state?a.history.back():u.state&&r.go(u.state),u.msg&&e.show(u.msg)):(t.msg&&e.show(t.msg),u.msg&&e.show(u.msg)))})}})}var o={restrict:"E",template:'<button name="submitBtn" class="mui-btn mui-btn-block mui-btn-green" ng-class="btnClass">{{text}}</button>',replace:!0,scope:{callback:"&"},link:i};return o}function n(t,e,n,r,a){function i(t,e,r){t.text=r.text||"确定",t.btnClass=r.btnClass||"",e.bind("click",function(){if(!n.isEmpty(r.form)||!n.isCorrectFormat(r.form))return!1;var e=n.submitData(r.form);r.callback&&t.callback({arg1:e})})}var o={restrict:"E",template:'<button name="saveBtn" class="mui-btn mui-btn-green" ng-class="btnClass">{{text}}</button>',replace:!0,scope:{callback:"&"},link:i};return o}t.$inject=["messageService","encryptService"],e.$inject=["httpService","messageService","validateService","$state","$window"],n.$inject=["httpService","messageService","validateService","$state","$window"],angular.module("form",["request","common","ui.router"]).factory("validateService",t).directive("submitButton",e).directive("saveButton",n)}(),function(){function t(t,e,n){function r(r,a,i,o){var u=t.defer(),s={method:"POST",url:a,data:i};return"GET"==r&&(s={method:"GET",url:a,params:i}),e(s).success(function(t,e){o=o||"data",0==t.code||"data"==o?u.resolve(t):"msg"==o&&n.show(t.msg)}).error(function(t,e){n.show("服务器请求失败")}),u.promise}return{getDatas:r}}t.$inject=["$q","$http","messageService"],angular.module("request",["common"]).factory("httpService",t)}();